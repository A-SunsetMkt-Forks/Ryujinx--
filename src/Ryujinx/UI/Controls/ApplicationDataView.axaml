<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:helpers="clr-namespace:Ryujinx.Ava.UI.Helpers"
             xmlns:appLibrary="using:Ryujinx.Ava.Utilities.AppLibrary"
             xmlns:viewModels="using:Ryujinx.Ava.UI.ViewModels"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="Ryujinx.Ava.UI.Controls.ApplicationDataView"
             x:DataType="viewModels:ApplicationDataViewModel">
    <StackPanel Orientation="Horizontal">
        <Image Margin="0"
               MaxWidth="256"
               MinWidth="256"
               Source="{Binding AppData.Icon, Converter={x:Static helpers:BitmapArrayValueConverter.Instance}}" />
        <Border Margin="5, 0" Width="2" Height="256" BorderBrush="Gray" Background="Gray" />
        <StackPanel Orientation="Vertical">
            <Grid
                RowDefinitions="Auto, Auto, Auto, Auto"
                ColumnDefinitions="*">
                <TextBlock Grid.Row="0"
                           HorizontalAlignment="Center"
                           Padding="0, -2, 0, 5"
                           Classes="h1"
                           Text="{Binding AppData.Name}" />
                <TextBlock Grid.Row="1"
                           HorizontalAlignment="Center"
                           Text="{Binding FormattedVersion}"
                           TextAlignment="Start"
                           TextWrapping="Wrap" />
                <TextBlock Grid.Row="2"
                           HorizontalAlignment="Center"
                           Text="{Binding FormattedDeveloper}"
                           TextAlignment="Start"
                           TextWrapping="Wrap" />
                <StackPanel Grid.ColumnSpan="2" Grid.Row="3"
                            HorizontalAlignment="Center"
                            Orientation="Horizontal" Margin="0 10, 0, 0"
                            Spacing="5">
                    <Button
                        Click="PlayabilityStatus_OnClick"
                        HorizontalContentAlignment="Left"
                        VerticalAlignment="Center"
                        IsVisible="{Binding AppData.HasPlayabilityInfo}"
                        Background="{DynamicResource AppListBackgroundColor}"
                        Padding="0">
                        <TextBlock
                            Margin="1.5"
                            Tag="{Binding AppData.IdString}"
                            Text="{Binding AppData.LocalizedStatus}"
                            Foreground="{Binding AppData.PlayabilityStatus, Converter={x:Static helpers:PlayabilityStatusConverter.Shared}}"
                            TextAlignment="Start"
                            TextWrapping="Wrap" />
                        <Button.Styles>
                            <Style Selector="Button">
                                <Setter Property="MinWidth"
                                        Value="0" />
                                <!-- avoids very wide buttons from the overall project avalonia style -->
                            </Style>
                        </Button.Styles>
                    </Button>
                    <Button
                        Click="IdString_OnClick"
                        HorizontalContentAlignment="Left"
                        VerticalAlignment="Center"
                        Background="{DynamicResource AppListBackgroundColor}"
                        Padding="0">
                        <TextBlock
                            Margin="1.5"
                            HorizontalAlignment="Stretch"
                            Text="{Binding AppData.IdString}"
                            TextAlignment="Start"
                            TextWrapping="Wrap" />
                    </Button>
                </StackPanel>
            </Grid>
            <Separator Margin="0, 10, 0, 10" Height="2" BorderBrush="Gray" Background="Gray" />
            <Grid ColumnDefinitions="Auto,*,Auto">
                <StackPanel Grid.Column="0"
                            Margin="10,0,0,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Top"
                            Orientation="Vertical"
                            Spacing="5">
                    <TextBlock
                        HorizontalAlignment="Stretch"
                        Text="{Binding FormattedFileExtension}"
                        TextAlignment="Start"
                        TextWrapping="Wrap" />
                    <TextBlock
                        HorizontalAlignment="Stretch"
                        IsVisible="{Binding AppData.HasLdnGames}"
                        Text="{Binding FormattedLdnInfo}"
                        TextAlignment="Start"
                        TextWrapping="Wrap" />
                </StackPanel>
                <StackPanel
                    Grid.Column="2"
                    Margin="0,0,10,0"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Top"
                    Orientation="Vertical"
                    Spacing="5">
                    <TextBlock
                        HorizontalAlignment="Stretch"
                        Text="{Binding FormattedLastPlayed}"
                        TextAlignment="End"
                        TextWrapping="Wrap" />
                    <TextBlock
                        HorizontalAlignment="Stretch"
                        Text="{Binding FormattedPlayTime}"
                        IsVisible="{Binding AppData.HasPlayedPreviously}"
                        TextAlignment="End"
                        TextWrapping="Wrap" />
                    <TextBlock
                        HorizontalAlignment="Stretch"
                        Text="{Binding FormattedFileSize}"
                        TextAlignment="End"
                        TextWrapping="Wrap" />
                </StackPanel>
            </Grid>
        </StackPanel>
    </StackPanel>
</UserControl>
